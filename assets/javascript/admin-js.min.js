function dumpit(t){console.log(t)}jQuery.fn.outerHTML=function(t){return t?this.before(t).remove():jQuery("<p>").append(this.eq(0).clone()).html()},jQuery.fn.extend({animateCss:function(t){var e="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";$(this).addClass("animated "+t).on(e,function(){$(this).removeClass("animated "+t)})}}),jQuery.extend({stripTags:function(t){return t?t.replace(/(<([^>]+)>)/gi,""):""}}),function(t){t(document).on("ready dw_dynamic",function(){t(".tab-boxes").each(function(){var e=t(this);t("ul.tabs li",e).each(function(){if(t(this).hasClass("active"))if(t(this).data("ajax-id")&&0===t(t(this).attr("data-target")).length){var a=t(this).data("ajax-id");t.ajax({method:"GET",url:ajax_url,data:{action:"load_news_tab",newsid:a},success:function(a){e.find(".tab-contents").append(a),t(document).trigger("dwtabs-loaded",[!0])}})}else t(t(this).attr("data-target")).show(),t(document).trigger("dwtabs-loaded",[!0]);else t(t(this).attr("data-target")).hide()}),t("ul.tabs li:not('.exclude')",e).click(function(){var a=t(this),n=a.attr("data-target");if(!a.hasClass("active"))if(t("ul.tabs li",e).removeClass("active"),a.addClass("active"),t(".tab-content",e).hide(),a.data("ajax-id")&&0===t(n).length){var i=a.data("ajax-id");t.ajax({method:"GET",url:ajax_url,data:{action:"load_news_tab",newsid:i},success:function(a){e.find(".tab-contents").append(a),t(document).trigger("dwtabs-loaded",[!0])}})}else t(n).fadeIn("medium"),t(document).trigger("dwtabs-loaded",[!0])})})});var e=function(e,a){return a.children().each(function(){t(this).width(t(this).width())}),a};t(document).on("ready dw_dynamic",function(){t(".dpws-sortable").sortable({helper:e,cancel:""})}),t(function(){var e=t("select#spec_tables_list").val();t("select#spec_tables_list").on("change",function(){var a=t(this).data("postid"),n=document.getElementById("loading_svg").innerHTML,i=t("#specifications_table_wrapper");if(0!==t(this).val()&&"0"!==t(this).val()){if(0!=e&&"0"!=e&&!window.confirm("Are you sure you want to switch table? all unsaved settings will be lost."))return t(this).val(t.data(this,"current")),!1;i.html(n),t.post(ajaxurl,{action:"dwps_load_table",specs_table:t(this).val(),post_id:a},function(e){i.html(e),setTimeout(function(){t(document).trigger("dw_dynamic",[!0])},250)})}else{if(!window.confirm("Are you sure you want to switch table? all unsaved settings will be lost."))return t(this).val(t.data(this,"current")),!1;i.html("")}e=t(this).val(),t.data(this,"current",t(this).val())}),t(document).on("change",".dw-table-field-wrap .customvalue-switch",function(){var e=t(this).parents("li").find("select"),a=t(this).parents("li").find("input.select-custom");t(this).is(":checked")?(e.prop("disabled",!0),a.prop("disabled",!1)):(e.prop("disabled",!1),a.prop("disabled",!0))}),t(document).on("ready dw_dynamic",function(){t(".dw-table-field-wrap .customvalue-switch").change()})}),t(function(){var e=new MultiModal({closeButton:!0});t(document).on("click","a[data-dwpsmodal]",function(a){a.preventDefault();var n=document.getElementById("modify_form_template").innerHTML,i=t.parseJSON(Mustache.render(document.getElementById("dwps_texts_template").innerHTML)),d=t(this),s=t(a.target).is(t("#dpws_add_new_btn"))?!0:!1;if(d.hasClass("edit"))var o=d.data("id")||!1;else var o=!1;var r=s?i.add_title:i.edit_title;if(s)e.new({title:r,content:Mustache.render(n)}),setTimeout(function(){window._group=t("#attr_group").clone()},600);else{var l={action:"dwps_edit_form",id:o,type:d.data("type")};d.css("opacity","0.4"),t.get(ajaxurl,l,function(a){e.new({title:r,content:a}),setTimeout(function(){t("#attr_type").change()},100),setTimeout(function(){window._group=t("#attr_group").clone()},600),d.css("opacity","1")})}}),t(document).on("submit","#dwps_modify_form",function(a){a.preventDefault();var n=t(this),d=t(this).serializeArray();t.post(ajaxurl,d,function(a){dumpit(a);var a=t.parseJSON(a);if(n.find(".result-msg").remove(),n.append('<span class="result-msg"><span class="msg '+a.result+'">'+a.message+"</span></span>"),"error"==a.result)for(i=0;i<=a.where.length;i++)n.find(a.where[i]).addClass("validation-error");else"success"==a.result&&(n.find(".validation-error").removeClass("validation-error"),t("#dwps_table_wrap").load(window.location.href+" #dwps_table"),setTimeout(function(){e.close()},1e3))})}),t(function(){t(document).on("change","#attr_table",function(){var e=window._group.html(),a=t.parseJSON(JSON.stringify(t(this).data("tables"))),n=t("#attr_group"),i=t(this).val();if(""!=t(this).val()){var d=t.map(a,function(t){return t.table_id==i?t:null}),s="";t.each(d[0].groups,function(t,e){s+='<option value="'+e.term_id+'">'+e.name+"</option>"}),n.find("option:not(:first-child)").remove(),n.append(s)}else"undefined"!=typeof e&&n.html(e)})});var a=function(){var e=t("#attr_type"),a=e.parents("form"),n=t("input#attr_default[data-initial]").val()||"";switch(e.val()){case"text":default:t("#attr_values").prop("disabled",!0).parent().hide(),t("#default_value_wrap").html('<input type="text" name="attr_default" id="attr_default" value="'+n+'">').parent().show();break;case"select":case"radio":if(t("#attr_values").prop("disabled",!1).parent().show(),a.find("#attr_values").length){var d=new Array;a.find("#attr_values").val().length>0&&(d=a.find("#attr_values").val().split("\n"));var s='<select name="attr_default" id="attr_default">';for(s+='<option value="">----</option>',i=0;i<d.length;i++){var o=d[i],r=""!=n&&n==encodeURIComponent(o)?" selected":"";s+='<option value="'+encodeURIComponent(o)+'"'+r+">"+o+"</option>"}s+="</select>",t("#default_value_wrap").html(s).parent().show()}break;case"textarea":t("#attr_values").prop("disabled",!0).parent().hide(),t("#default_value_wrap").html('<textarea name="attr_default" id="attr_default">'+n+"</textarea>").parent().show();break;case"true_false":t("#attr_values").prop("disabled",!0).parent().hide();var l="yes"==n?" checked":"";t("#default_value_wrap").html('<input type="checkbox" name="attr_default" id="attr_default"'+l+">").parent().show()}};t(document).on("ready change",function(e){("ready"==e.type||t(e.target).is(t("#attr_type")))&&a()}).change(),t(document).on("change","#attr_type",function(){t("#attr_values").change(function(){t("#attr_type").change()})}),t(function(){t(document).on("change",".dwps-table .check-column input",function(){var e=t(this).parents(".dwps-table");e.find("tbody").has("input[type=checkbox]:checked").length?t("#dpws_bulk_delete_btn").removeAttr("disabled"):t("#dpws_bulk_delete_btn").attr("disabled","disabled")})}),t(document).on("click",".js-modal-close",function(t){t.preventDefault(),e.close()}),t(document).on("click","#dwps_table .delete, #dpws_bulk_delete_btn",function(a){a.preventDefault();var n=t(this).data("id"),i=t.parseJSON(Mustache.render(document.getElementById("dwps_delete_template").innerHTML));if(t(this).is("#dpws_bulk_delete_btn"))var n=t("input.dlt-bulk-group:checked").map(function(){return t(this).val()}).get();t(this).is("[disabled]")||e.new(i.modal),t(".btn-confirm").click(function(a){a.preventDefault();var d="attribute"==i.data.type?"dwps_modify_attributes":"dwps_modify_groups";t.post(ajaxurl,{action:d,"do":"delete",id:n},function(a){console.log(a);var a=t.parseJSON(a);"success"==a.result?(t("#dwps_table_wrap").load(window.location.href+" #dwps_table"),setTimeout(function(){e.close()},1e3)):e.new({title:"Failed",content:"Could not delete the group"})})})}),t(document).on("click","#dwps_table .re-arange",function(a){a.preventDefault();var n=t.parseJSON(Mustache.render(document.getElementById("dwps_texts_template").innerHTML));t.get(ajaxurl,{action:"dwps_group_rearange",id:t(this).data("id")},function(a){e.new({title:n.re_arrange,content:a}),setTimeout(function(){t(document).trigger("dw_dynamic",[!0])},100)})}),t(document).on("click",'input[type="checkbox"][readonly]',function(t){t.preventDefault()}),t(function(){var e=t(".table-groups-list");t(document).on("change",".dwsp-meta-item input[type=checkbox]",function(){var a=t(this).val();if(t(this).is(":checked")){var n='<li><input checked type="checkbox" name="groups[]" value="'+a+'" readonly>'+t(this).parent().find("span").text()+"</li>";e.append(n)}else e.has("input[value="+a+"]").length&&e.find("input[value="+a+"]").parents("li").remove()})})})}(jQuery);